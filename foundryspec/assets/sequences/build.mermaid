sequenceDiagram
    participant Agent as AI Agent
    participant CLI
    participant BuildManager
    participant FS as Local Filesystem
    participant MCLI as Mermaid CLI

    Agent->>CLI: foundryspec build
    CLI->>BuildManager: new BuildManager()
    CLI->>BuildManager: build()
    
    BuildManager->>FS: Read "foundry.config.json" (Project Name/Version)
    BuildManager->>FS: Scan "assets/" directory for subfolders
    BuildManager->>BuildManager: discoverCategories() (Auto-Discovery)
    
    loop For each Discovered Category Folder
        BuildManager->>FS: Scan for .mermaid files
        loop For each Diagram
            BuildManager->>FS: Read content
            BuildManager->>BuildManager: validateDiagramLinks()
            BuildManager->>MCLI: Compile to SVG
            MCLI-->>BuildManager: SVG Output
        end
    end
    
    BuildManager->>BuildManager: generateHub()
    BuildManager->>FS: Write "index.html" (Hub)
    BuildManager->>FS: Write "assets/CAT/index.html" (Viewer)
    BuildManager->>FS: Copy core assets to dist/
    
    BuildManager-->>CLI: Build Success
    CLI-->>Agent: âœ… Build complete!
