sequenceDiagram
    participant Architect
    participant CLI
    participant ScaffoldManager
    participant FS as Local Filesystem

    Architect->>CLI: foundryspec upgrade
    CLI->>ScaffoldManager: upgrade()
    
    ScaffoldManager->>FS: Read "foundry.config.json"
    Note over ScaffoldManager: Verify it's a valid project
    
    rect rgb(230, 245, 255)
        Note over ScaffoldManager, FS: Structural Onboarding
        ScaffoldManager->>FS: Check for "assets/discovery"
        ScaffoldManager->>FS: Create Discovery folder if missing
        ScaffoldManager->>FS: Create personas.mermaid if missing
        ScaffoldManager->>FS: Create requirements.mermaid if missing
        ScaffoldManager->>FS: Create journeys.mermaid if missing
    end

    ScaffoldManager->>FS: ensureGitignore()
    
    ScaffoldManager-->>CLI: Upgrade Success
    CLI-->>Architect: âœ… Project upgraded!
