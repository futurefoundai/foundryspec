rules:
  - id: persona-gate
    name: Persona Architecture Gate
    level: folder
    description: "Personas must be mindmaps with Role, Description, and Goals to support consistent user modeling."
    target:
      idPrefix: PER_
      pathPattern: "personas/*"
    type: structural
    enforcement: error
    checks:
      mermaidType: mindmap
      requiredExtension: mermaid
      requiredFrontmatter: [title, description, id]
      requiredNodes: [Role, Description, Goals]
    hub:
      id: GRP_Personas
      title: Personas

  - id: journey-syntax
    name: Journey Strict Syntax
    level: folder
    description: "Journeys must be sequence diagrams to accurately capture interaction flows."
    target:
      idPrefix: JRN_
      pathPattern: "journeys/*"
    type: syntax
    enforcement: error
    checks:
      mermaidType: sequenceDiagram
      requiredExtension: mermaid
      requiredFrontmatter: [title, description, id]
      requiredNodes: [User, System]
    hub:
      id: GRP_Journeys
      title: Journeys

  - id: requirement-syntax
    name: Requirement Syntax
    level: folder
    description: "Requirements must use specific Mermaid syntax for automated traceability."
    target:
      idPrefix: REQ_
      pathPattern: "requirements/*"
    type: syntax
    enforcement: error
    checks:
      mermaidType: requirementDiagram
      requiredExtension: mermaid
      requiredFrontmatter: [title, description, id]
    hub:
      id: GRP_Requirements
      title: Requirements

  - id: context-registration
    name: Context Model Registration
    level: folder
    description: "Registers Context models for the Hub."
    target:
      idPrefix: CTX_
      pathPattern: "context/*"
    type: metadata
    enforcement: error
    checks:
      requiredFrontmatter: [title, description, id]
    hub:
      id: GRP_Context
      title: Context

  - id: boundary-registration
    name: Boundary Definition Registration
    level: folder
    description: "Registers Boundary definitions for the Hub."
    target:
      idPrefix: BND_
      pathPattern: "boundaries/*"
    type: metadata
    enforcement: error
    checks:
      requiredFrontmatter: [title, description, id]
    hub:
      id: GRP_Boundaries
      title: Boundaries

  - id: component-registration
    name: Component Registration
    level: folder
    description: "Registers Components for the Hub."
    target:
      idPrefix: COMP_
      pathPattern: "components/*"
    type: metadata
    enforcement: error
    checks:
      requiredFrontmatter: [title, description, id]
    hub:
      id: GRP_Components
      title: Components

  - id: footnotes-policy
    name: Footnotes Markdown Policy
    level: file
    description: "Footnotes are supplementary and must be in Markdown format."
    target:
      pathPattern: "**/footnotes/*"
    type: structural
    enforcement: error
    checks:
      requiredExtension: md
      requiredFrontmatter: [title, description, id]

  - id: core-metadata
    name: Core Document Metadata
    level: file
    description: "Every file requires standard frontmatter for identification and Hub integration."
    target:
      pathPattern: "**/*.mermaid"
    type: metadata
    enforcement: error
    checks:
      requiredFrontmatter: [title, description, id]

  - id: global-traceability
    name: Global Document Traceability
    level: project
    description: "To maintain 100% intent-to-code integrity, every document (node) must be reachable from the Hub Root."
    target:
      pathPattern: "**/*.{mermaid,md}"
    type: traceability
    enforcement: error
    checks:
      traceability:
        mustBeLinked: true
