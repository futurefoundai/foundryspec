rules:
  - id: persona-gate
    name: Persona Architecture Gate
    level: folder
    description: "Personas must be mindmaps with Role, Description, and Goals to support consistent user modeling."
    target:
      pathPattern: "personas/*"
    type: structural
    enforcement: error
    checks:
      mermaidType: mindmap
      requiredExtension: mermaid
      requiredFrontmatter: [title, description, id]
      requiredNodes: [Role, Description, Goals]

  - id: journey-syntax
    name: Journey Strict Syntax
    level: folder
    description: "Journeys must be sequence diagrams to accurately capture interaction flows."
    target:
      pathPattern: "journeys/*"
    type: syntax
    enforcement: error
    checks:
      mermaidType: sequenceDiagram
      requiredExtension: mermaid
      requiredFrontmatter: [title, description, id]
      requiredNodes: [User, System]

  - id: requirement-syntax
    name: Requirement Syntax
    level: folder
    description: "Requirements must use specific Mermaid syntax for automated traceability."
    target:
      pathPattern: "requirements/*"
    type: syntax
    enforcement: error
    checks:
      mermaidType: requirementDiagram
      requiredExtension: mermaid
      requiredFrontmatter: [title, description, id]

  - id: footnotes-policy
    name: Footnotes Markdown Policy
    level: file
    description: "Footnotes are supplementary and must be in Markdown format."
    target:
      pathPattern: "**/footnotes/*"
    type: structural
    enforcement: error
    checks:
      requiredExtension: md
      requiredFrontmatter: [title, description, id]

  - id: core-metadata
    name: Core Document Metadata
    level: file
    description: "Every file requires standard frontmatter for identification and Hub integration."
    target:
      pathPattern: "**/*.mermaid"
    type: metadata
    enforcement: error
    checks:
      requiredFrontmatter: [title, description, id]

  - id: global-traceability
    name: Global Document Traceability
    level: project
    description: "To maintain 100% intent-to-code integrity, every document (node) must be reachable from the Hub Root."
    target:
      pathPattern: "**/*.{mermaid,md}"
    type: traceability
    enforcement: error
    checks:
      traceability:
        mustBeLinked: true

hub:
  categories:
    - id: GRP_Personas
      title: Personas
      path: personas
      idPrefix: PER_
    - id: GRP_Requirements
      title: Requirements
      path: requirements
      idPrefix: REQ_
    - id: GRP_Journeys
      title: Journeys
      path: journeys
      idPrefix: JRN_
    - id: GRP_Context
      title: Context
      path: context
      idPrefix: CTX_
    - id: GRP_Boundaries
      title: Boundaries
      path: boundaries
      idPrefix: BND_
    - id: GRP_Components
      title: Components
      path: components
      idPrefix: COMP_
